# é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰

**é€‚é…å™¨æ¨¡å¼**æ˜¯ä¸€ç§**ç»“æ„å‹è®¾è®¡æ¨¡å¼**ï¼Œé€šè¿‡**è½¬æ¢æ¥å£**çš„æ–¹å¼ï¼Œè®©åŸæœ¬ä¸å…¼å®¹çš„ç±»æˆ–å¯¹è±¡èƒ½å¤ŸååŒå·¥ä½œã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯**åŒ…è£…ä¸€ä¸ªå·²æœ‰çš„æ¥å£ï¼Œä½¿å…¶ç¬¦åˆå®¢æˆ·ç«¯çš„æœŸæœ›å½¢å¼**ã€‚

## æ ¸å¿ƒç›®æ ‡
1. **æ¥å£å…¼å®¹**ï¼šè§£å†³ä¸¤ä¸ªå·²æœ‰æ¥å£ä¸å…¼å®¹çš„é—®é¢˜ã€‚
2. **å¤ç”¨æ—§ä»£ç **ï¼šåœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šé›†æˆæ–°åŠŸèƒ½ã€‚
3. **è§£è€¦**ï¼šå°†å®¢æˆ·ç«¯ä»£ç ä¸å…·ä½“å®ç°åˆ†ç¦»ã€‚

## åˆ†ç±»
1. **å¯¹è±¡é€‚é…å™¨**ï¼šé€šè¿‡ç»„åˆæ–¹å¼å®ç°ï¼ˆæ›´çµæ´»ï¼Œæ¨èä½¿ç”¨ï¼‰ã€‚
2. **ç±»é€‚é…å™¨**ï¼šé€šè¿‡å¤šé‡ç»§æ‰¿å®ç°ï¼ˆJavaScript ä¸æ”¯æŒï¼‰ã€‚

## UML å›¾
```plaintext
+----------------+     +----------------+
|     Target     |     |    Adaptee    |
+----------------+     +----------------+
| + request()    |     | + specificReq()|
+----------------+     +----------------+
        â–²                     â–²
        |                     |
        |                     |
+----------------+           
|    Adapter     |           
+----------------+           
| + request()    |           
+----------------+           
```
**è§’è‰²è¯´æ˜**
1. **Targetï¼ˆç›®æ ‡æŠ½è±¡ç±»ï¼‰**ï¼šå®šä¹‰å®¢æˆ·ç«¯ä½¿ç”¨çš„ä¸ç‰¹å®šé¢†åŸŸç›¸å…³çš„æ¥å£
2. **Adapterï¼ˆé€‚é…å™¨ç±»ï¼‰**ï¼šå¯¹ Adaptee çš„æ¥å£ä¸ Target æ¥å£è¿›è¡Œé€‚é…
3. **Adapteeï¼ˆé€‚é…è€…ç±»ï¼‰**ï¼šå®šä¹‰ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦é€‚é…

**åº”ç”¨åœºæ™¯**
1. **é›†æˆæ—§ç³»ç»Ÿ**ï¼šå°†é—ç•™ä»£ç é€‚é…åˆ°æ–°æ¥å£ã€‚
2. **ç¬¬ä¸‰æ–¹åº“é€‚é…**ï¼šç»Ÿä¸€ä¸åŒåº“çš„æ¥å£è°ƒç”¨æ–¹å¼ã€‚
3. **æ¥å£ç‰ˆæœ¬å‡çº§**ï¼šå…¼å®¹æ–°æ—§ç‰ˆæœ¬çš„ APIã€‚


```javascript
// ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰
class Target {
    request() {
        return "Target: é»˜è®¤çš„ç›®æ ‡è¡Œä¸º";
    }
}

// éœ€è¦é€‚é…çš„ç±»ï¼ˆAdapteeï¼‰
class Adaptee {
    specificRequest() {
        return "Adaptee: ç‰¹æ®Šçš„è¯·æ±‚";
    }
}

// é€‚é…å™¨ï¼ˆAdapterï¼‰
class Adapter extends Target {
    constructor(adaptee) {
        super();
        this.adaptee = adaptee;
    }

    request() {
        const result = this.adaptee.specificRequest();
        return `Adapter: (è½¬æ¢) ${result}`;
    }
}

// å®¢æˆ·ç«¯ä»£ç 
function clientCode(target) {
    console.log(target.request());
}

// ä½¿ç”¨ç¤ºä¾‹
const target = new Target();
console.log("å®¢æˆ·ç«¯ä½¿ç”¨ Target:");
clientCode(target);

const adaptee = new Adaptee();
console.log("\nå®¢æˆ·ç«¯ä½¿ç”¨ Adaptee é€šè¿‡é€‚é…å™¨:");
const adapter = new Adapter(adaptee);
clientCode(adapter);
```

### å®é™…åº”ç”¨ç¤ºä¾‹

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´å®é™…çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè€çš„æ•°æ®æ ¼å¼å¤„ç†ç³»ç»Ÿï¼Œç°åœ¨éœ€è¦é€‚é…æ–°çš„æ•°æ®æ ¼å¼ï¼š

```javascript
// æ—§çš„æ•°æ®æ ¼å¼å¤„ç†å™¨
class OldDataProcessor {
    processData(data) {
        return `å¤„ç†æ—§æ ¼å¼æ•°æ®: ${JSON.stringify(data)}`;
    }
}

// æ–°çš„æ•°æ®æ ¼å¼æ¥å£
class NewDataInterface {
    handleData(newFormatData) {
        return `å¤„ç†æ–°æ ¼å¼æ•°æ®: ${JSON.stringify(newFormatData)}`;
    }
}

// æ•°æ®æ ¼å¼é€‚é…å™¨
class DataFormatAdapter extends OldDataProcessor {
    constructor(newProcessor) {
        super();
        this.newProcessor = newProcessor;
    }

    processData(oldFormatData) {
        // è½¬æ¢æ•°æ®æ ¼å¼
        const newFormatData = this.convertFormat(oldFormatData);
        return this.newProcessor.handleData(newFormatData);
    }

    convertFormat(oldData) {
        // å®ç°æ•°æ®æ ¼å¼è½¬æ¢é€»è¾‘
        return {
            ...oldData,
            convertedAt: new Date().toISOString()
        };
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const oldData = { id: 1, name: "æµ‹è¯•æ•°æ®" };
const newProcessor = new NewDataInterface();
const adapter = new DataFormatAdapter(newProcessor);

console.log(adapter.processData(oldData));
```
## é€‚é…å™¨æ¨¡å¼çš„ä¼˜åŠ¿
**å…¼å®¹æ€§**ï¼šæ— ç¼é›†æˆä¸å…¼å®¹çš„æ¥å£ã€‚

**å¤ç”¨æ€§**ï¼šæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç å³å¯å¤ç”¨åŠŸèƒ½ã€‚

**çµæ´»æ€§**ï¼šå¯é€‚é…å¤šç§ä¸åŒçš„æ¥å£ã€‚


## æ³¨æ„äº‹é¡¹
1. é¿å…è¿‡åº¦é€‚é…ï¼šä¸è¦ä¸ºæ‰€æœ‰ä¸å…¼å®¹çš„æ¥å£å¼ºåˆ¶ä½¿ç”¨é€‚é…å™¨ã€‚
2. æ€§èƒ½å¼€é”€ï¼šé€‚é…å™¨å¯èƒ½å¼•å…¥é¢å¤–çš„è°ƒç”¨å±‚çº§ã€‚
3. è®¾è®¡æƒè¡¡ï¼šå¦‚æœå¯ä»¥ç›´æ¥ä¿®æ”¹æ¥å£ï¼Œå¯èƒ½æ›´ç®€å•é«˜æ•ˆã€‚

## ä¸å…¶ä»–æ¨¡å¼çš„åŒºåˆ«
- è£…é¥°å™¨æ¨¡å¼ï¼šåŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼ˆä¸æ”¹å˜æ¥å£ï¼‰ã€‚
- ä»£ç†æ¨¡å¼ï¼šæ§åˆ¶å¯¹è±¡è®¿é—®ï¼ˆæ¥å£ç›¸åŒï¼‰ã€‚
- å¤–è§‚æ¨¡å¼ï¼šç®€åŒ–å¤æ‚ç³»ç»Ÿçš„æ¥å£ï¼ˆæ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ï¼‰ã€‚

## æ€»ç»“
é€‚é…å™¨æ¨¡å¼æ˜¯è§£å†³æ¥å£ä¸å…¼å®¹é—®é¢˜çš„åˆ©å™¨ï¼Œå°¤å…¶åœ¨é›†æˆç¬¬ä¸‰æ–¹åº“æˆ–æ—§ç³»ç»Ÿæ—¶éå¸¸å®ç”¨ï¼ ğŸ”Œ